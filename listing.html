<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Listings - Lost & Found Portal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CSS Variables */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, #697cd3 0%, #546679 100%);
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            padding-top: 100px; /* Space for fixed navbar */
            min-height: 100vh;
        }

        /* NAVBAR STYLES - COMPACT VERSION (90% appearance) */
        .navbar-custom {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            padding: 0.8rem 0; /* Reduced from 1rem */
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .navbar-custom.scrolled {
            padding: 0.4rem 0; /* Reduced from 0.5rem */
            background: rgba(26, 26, 46, 0.98);
        }

        .navbar-brand {
            color: white !important;
            font-size: 1.35rem; /* Reduced from 1.5rem */
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .navbar-brand:hover {
            transform: scale(1.05);
        }

        .navbar-logo {
            width: 36px; /* Reduced from 40px */
            height: 36px; /* Reduced from 40px */
            margin-right: 10px; /* Reduced from 12px */
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .navbar-brand:hover .navbar-logo {
            transform: rotateY(180deg);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .logo-tt {
            font-size: 1.08rem; /* Reduced from 1.2rem */
            font-weight: 800;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            letter-spacing: -1px;
        }

        .nav-link {
            color: #adb5bd !important;
            margin: 0 0.4rem; /* Reduced from 0.5rem */
            transition: all 0.3s ease;
            position: relative;
            padding: 0.4rem 0.8rem !important; /* Reduced from 0.5rem 1rem */
            border-radius: 25px;
            font-size: 0.9rem; /* Added to reduce text size */
        }

        .nav-link:hover {
            color: white !important;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            transform: translateY(-2px);
        }

        /* Login Button */
        .btn-login {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            color: white;
            border-radius: 25px;
            padding: 0.5rem 1.5rem; /* Reduced from 0.6rem 1.8rem */
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem; /* Added to reduce text size */
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
            background: linear-gradient(135deg, #20c997, #28a745);
        }

        /* Optional: If you want even more compact appearance */
        .navbar-custom-extra-compact {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            padding: 0.6rem 0; /* Even more reduced */
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .navbar-custom-extra-compact.scrolled {
            padding: 0.3rem 0; /* Even more reduced */
            background: rgba(26, 26, 46, 0.98);
        }

        .navbar-custom-extra-compact .navbar-brand {
            font-size: 1.25rem; /* Even smaller */
        }

        .navbar-custom-extra-compact .navbar-logo {
            width: 32px; /* Even smaller */
            height: 32px;
            margin-right: 8px;
        }

        .navbar-custom-extra-compact .logo-tt {
            font-size: 1rem; /* Even smaller */
        }

        .navbar-custom-extra-compact .nav-link {
            margin: 0 0.3rem;
            padding: 0.3rem 0.7rem !important;
            font-size: 0.85rem;
        }

        .navbar-custom-extra-compact .btn-login {
            padding: 0.4rem 1.3rem;
            font-size: 0.85rem;
        }

        /* FOOTER STYLES */
        .footer-custom {
            background: rgba(26, 26, 46, 0.95);
            color: white;
            padding: 4rem 0 2rem;
            position: relative;
            margin-top: auto;
        }

        .footer-custom::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .footer-custom h5 {
            color: #64b5f6;
            margin-bottom: 1.5rem;
            font-weight: 700;
        }

        .footer-custom a {
            color: #adb5bd;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .footer-custom a:hover {
            color: #64b5f6;
            transform: translateX(5px);
        }

        .social-links {
            text-align: left; /* Align social links to the left */
        }

        .social-links a {
            color: white;
            font-size: 1.8rem;
            margin: 0 15px 0 0; /* Remove left margin, keep right margin */
            transition: all 0.3s ease;
            display: inline-block;
        }

        .social-links a:first-child {
            margin-left: 0; /* Ensure first icon has no left margin */
        }

        /* Individual hover colors for each social platform */
        .social-links a:hover {
            transform: translateY(-3px) scale(1.2);
        }

        /* Facebook - Blue */
        .social-links a[href*="facebook"]:hover,
        .social-links a.facebook:hover {
            color: #1877F2;
        }

        /* Twitter - Light Blue */
        .social-links a[href*="twitter"]:hover,
        .social-links a.twitter:hover {
            color: #1DA1F2;
        }

        /* Instagram - Gradient effect (using pink as fallback) */
        .social-links a[href*="instagram"]:hover,
        .social-links a.instagram:hover {
            color: #E4405F;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* LinkedIn - Professional Blue */
        .social-links a[href*="linkedin"]:hover,
        .social-links a.linkedin:hover {
            color: #0077B5;
        }

        /* WhatsApp - Green (multiple selectors for different URL formats) */
        .social-links a[href*="whatsapp"]:hover,
        .social-links a[href*="wa.me"]:hover,
        .social-links a[href*="api.whatsapp"]:hover,
        .social-links a.whatsapp:hover {
            color: #25D366 !important;
        }

        /* Alternative: If you want even more control over positioning */
        .social-links-container {
            display: flex;
            justify-content: flex-start; /* Align to left */
            gap: 15px; /* Consistent spacing between icons */
        }

        .social-links-container a {
            color: white;
            font-size: 1.8rem;
            transition: all 0.3s ease;
            margin: 0; /* Remove all margins when using flexbox */
        }

        /* Individual hover colors for flexbox version */
        .social-links-container a:hover {
            transform: translateY(-3px) scale(1.2);
        }

        .social-links-container a[href*="facebook"]:hover,
        .social-links-container a.facebook:hover {
            color: #1877F2;
        }

        .social-links-container a[href*="twitter"]:hover,
        .social-links-container a.twitter:hover {
            color: #1db6f2;
        }

        .social-links-container a[href*="instagram"]:hover,
        .social-links-container a.instagram:hover {
            color: #E4405F;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .social-links-container a[href*="linkedin"]:hover,
        .social-links-container a.linkedin:hover {
            color: #0077B5;
        }

        .social-links-container a[href*="whatsapp"]:hover,
        .social-links-container a[href*="wa.me"]:hover,
        .social-links-container a[href*="api.whatsapp"]:hover,
        .social-links-container a.whatsapp:hover {
            color: #25D366 !important;
        }
        
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .hero-section {
            background: linear-gradient(135deg, rgba(52, 58, 64, 0.9), rgba(102, 126, 234, 0.8));
            color: white;
            padding: 4rem 0 2rem;
            text-align: center;
            margin-top: 80px;
        }
        
        .hero-section h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin: 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }
        
        .hero-subtitle {
            font-size: 1.1rem;
            margin-top: 1rem;
            opacity: 0.9;
        }

        /* Style for the highlighted carousel (optional) */
        .carousel-3d-section {
            transition: box-shadow 0.3s ease;
            padding-top: 20px;
            margin-top: -20px; /* Pulls content up slightly when scrolled to */
        }

        /* 3D Carousel Styles */
        .carousel-3d-section {
            background: var(--secondary-gradient);
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
        }

        .carousel-3d-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
        }

        .carousel-3d-container {
            perspective: 1500px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 450px;
            position: relative;
        }

        .carousel-3d {
            position: relative;
            width: 320px;
            height: 220px;
            transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .carousel-item-3d {
            position: absolute;
            width: 300px;
            height: 200px;
            border-radius: 25px;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 2px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            cursor: pointer;
            transition: all 0.6s ease;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            text-align: center;
            padding: 1.5rem;
        }

        .carousel-item-3d:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.08) rotateY(5deg);
            box-shadow: 0 25px 80px rgba(102, 126, 234, 0.5);
        }

        .carousel-item-3d {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.4));
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 0 20px 70px rgba(102, 126, 234, 0.7);
        }

        .carousel-item-3d .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #64b5f6;
            transition: all 0.3s ease;
        }

        .carousel-item-3d:hover .icon {
            transform: scale(1.2) rotateY(10deg);
            color: #90caf9;
        }

        .carousel-item-3d h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
        }

        .carousel-item-3d p {
            font-size: 0.9rem;
            opacity: 0.95;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .carousel-item-3d .btn {
            background: rgba(255, 255, 255, 0.9);
            color: #667eea;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .carousel-item-3d .btn:hover {
            background: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Carousel Controls */
        .carousel-controls {
            position: absolute;
            width: 100%;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
        }

        .carousel-btn {
            pointer-events: auto;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            backdrop-filter: blur(5px);
        }

        .carousel-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .carousel-btn i {
            font-size: 1.2rem;
        }
        
        .main-content {
            padding: 2rem 0;
        }
        
        .search-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #495057;
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        .form-control, .form-select {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.9);
        }
        
        .form-control:focus, .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            transform: translateY(-2px);
        }
        
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            max-height: 200px;
            overflow-y: auto;
        }

        .search-suggestion {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s;
        }

        .search-suggestion:hover {
            background-color: #f8f9fa;
        }

        .search-suggestion:last-child {
            border-bottom: none;
        }
        
        .listings-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 2.5rem;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .listing-item {
            background: rgba(255,255,255,0.8);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            gap: 1rem;
        }
        
        .listing-item:hover {
            transform: translateX(10px) translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .listing-image {
            flex-shrink: 0;
            width: 100px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .listing-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .listing-image .no-image {
            color: #ccc;
            font-size: 2rem;
        }
        
        .listing-content {
            flex: 1;
        }
        
        .listing-type {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .listing-type.lost {
            background: linear-gradient(135deg, #dc3545, #e74c3c);
        }
        
        .listing-type.found {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        
        .listing-title {
            font-weight: 700;
            color: #495057;
            margin: 0.5rem 0;
            font-size: 1.1rem;
        }
        
        .listing-meta {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .listing-actions {
            margin-top: 1rem;
        }

        .listing-actions .btn {
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .btn-primary-custom {
            background: linear-gradient(135deg, #28a745, #20c997);
            border: none;
            padding: 0.5rem 1rem;
            font-weight: 600;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .pagination .page-link {
            border: none;
            color: #667eea;
            padding: 0.75rem 1rem;
            margin: 0 0.25rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .pagination .page-link:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
        }
        
        .pagination .page-item.active .page-link {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .stats-row {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }
        
        .stat-item {
            color: white;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2rem;
            }
            
            .search-container, .listings-container {
                padding: 1.5rem;
            }
            
            .listing-item {
                flex-direction: column;
            }
            
            .listing-image {
                width: 100%;
                height: 120px;
            }
            
            .stats-row {
                flex-direction: column;
                gap: 1rem;
            }
        }

        @media (max-width: 576px) {
            .carousel-3d-section {
                padding: 2rem 0;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .carousel-item-3d {
                padding: 1rem 0.5rem;
            }
            
            .carousel-item-3d .btn {
                padding: 0.4rem 1rem;
                font-size: 0.8rem;
            }
        }
        
        .no-results {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
        }
        
        .no-results i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* Improved Image Modal Styles */
        .image-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .image-modal.show {
            display: block;
            opacity: 1;
        }
        
        .image-modal-content {
            position: relative;
            margin: auto;
            display: block;
            width: auto;
            max-width: 90%;
            max-height: 80vh;
            top: 50%;
            transform: translateY(-50%);
            animation: zoom 0.3s ease;
            border-radius: 8px;
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
        }
        
        @keyframes zoom {
            from {transform: translateY(-50%) scale(0.9); opacity: 0;}
            to {transform: translateY(-50%) scale(1); opacity: 1;}
        }
        
        .image-modal-close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            z-index: 2001;
        }
        
        .image-modal-close:hover,
        .image-modal-close:focus {
            color: #bbb;
            text-decoration: none;
        }
        
        .image-modal-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            text-align: center;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }
        
        /* Loading spinner for images */
        .image-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #ccc;
        }
        
        .image-loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .image-modal-content {
                max-width: 95%;
                max-height: 85vh;
            }
            
            .image-modal-close {
                top: 10px;
                right: 20px;
                font-size: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index2.html">
                <div class="navbar-logo">
                    <span class="logo-tt">TT</span>
                </div>
                Trace Together
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars text-white"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index2.html">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="reportDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-plus me-1"></i>Report Missing
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="reportDropdown">
                            <li><a class="dropdown-item" href="report-item.html">
                                <i class="fas fa-user-plus me-1"></i>Report Item
                                </a>
                            </li>
                            <li><a class="dropdown-item" href="report-person.html">
                                <i class="fas fa-user-plus me-1"></i>Report Person
                                </a>
                            </li>
                            <li><a class="dropdown-item" href="report-animal.html">
                                <i class="fas fa-user-plus me-1"></i>Report Animal
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="listing.html">
                            <i class="fas fa-list me-1"></i>Active Listings
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ourNGOs.html">
                            <i class="fas fa-search me-1"></i>Our NGO'S
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact us.html">
                            <i class="fas fa-phone me-1"></i>Contact Us
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about us.html">
                            <i class="fas fa-info-circle me-1"></i>About Us
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="login.html">
                            <button class="btn btn-login btn-sm ms-2">
                                <i class="fas fa-user me-1"></i>Login
                            </button>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="container">
            <h1>All Lost & Found Listings</h1>
            <p class="hero-subtitle"><strong> Browse through all reported items and help reunite them with their owners</strong> </p>
            
            <div class="stats-row">
                <div class="stat-item">
                    <span class="stat-number" id="totalItems">0</span>
                    <span class="stat-label">Total Items</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="lostItems">0</span>
                    <span class="stat-label">Lost Items</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="foundItems">0</span>
                    <span class="stat-label">Found Items</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="recentItems">0</span>
                    <span class="stat-label">This Week</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 3D Carousel Section -->
    <section id="report-carousel" class="carousel-3d-section">
        <div class="container">
            <h2 class="section-title text-white mb-5">Quick Report Options</h2>
            <div class="carousel-3d-container">
                <div class="carousel-3d" id="carousel3d">
                    
                    <!-- Report Person -->
                    <div class="carousel-item-3d active" data-service="report-person">
                        <i class="fas fa-user icon"></i>
                        <h3>Report Missing Person</h3>
                        <p>File a report for a missing family member or loved one with our specialized form</p>
                        <a href="report-person.html" class="btn btn-light mt-2">Report Now</a>
                    </div>
                    
                    <!-- Report Animal -->
                    <div class="carousel-item-3d" data-service="report-animal">
                        <i class="fas fa-paw icon"></i>
                        <h3>Report Missing Pet</h3>
                        <p>Help find your lost pet with our dedicated animal reporting system</p>
                        <a href="report-animal.html" class="btn btn-light mt-2">Report Now</a>
                    </div>
                    
                    <!-- Report Item -->
                    <div class="carousel-item-3d" data-service="report-item">
                        <i class="fas fa-box-open icon"></i>
                        <h3>Report Lost Item</h3>
                        <p>Report valuable lost items to increase chances of recovery</p>
                        <a href="report-item.html" class="btn btn-light mt-2">Report Now</a>
                    </div>
                
                </div>
                <div class="carousel-controls">
                    <button class="carousel-btn" id="prevBtn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-btn" id="nextBtn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="main-content">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <!-- Search Section -->
                    <div class="search-container">
                        <h3 class="section-title">Search & Filter Items</h3>
                        
                        <!-- Main Search Input -->
                        <div class="position-relative mb-3">
                            <input type="text" id="searchInput" class="form-control" placeholder="Search items, locations, descriptions...">
                            <div id="searchSuggestions" class="search-suggestions" style="display: none;"></div>
                        </div>
                        
                        <!-- Filter Row -->
                        <div class="row g-2 mb-3">
                            <div class="col-md-2">
                                <select id="typeFilter" class="form-select">
                                    <option value="all">All Types</option>
                                    <option value="lost">Lost</option>
                                    <option value="found">Found</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select id="categoryFilter" class="form-select">
                                    <option value="all">All Categories</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="pet">Pet</option>
                                    <option value="wallet/purse">Wallet/Purse</option>
                                    <option value="keys">Keys</option>
                                    <option value="clothing">Clothing</option>
                                    <option value="jewelry">Jewelry</option>
                                    <option value="documents">Documents</option>
                                    <option value="sports">Sports Equipment</option>
                                    <option value="accessories">Accessories</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <input type="text" id="locationFilter" class="form-control" placeholder="Location...">
                            </div>
                            <div class="col-md-2">
                                <input type="date" id="dateFromFilter" class="form-control" title="From Date">
                            </div>
                            <div class="col-md-2">
                                <input type="date" id="dateToFilter" class="form-control" title="To Date">
                            </div>
                            <div class="col-md-2">
                                <button id="clearFilters" class="btn btn-outline-secondary w-100" style="display: none;">
                                    <i class="fas fa-times me-1"></i>Clear
                                </button>
                            </div>
                        </div>
                        
                        <!-- Results Counter -->
                        <div id="searchResultsCount" class="text-muted small mb-3"></div>
                    </div>
                    
                    <!-- Listings Section -->
                    <div class="listings-container">
                        <h3 class="section-title">Browse All Listings</h3>
                        <div id="listingsContainer">
                            <!-- Listings will be loaded here -->
                        </div>
                        
                        <!-- Pagination -->
                        <div class="pagination-container">
                            <nav aria-label="Listings pagination">
                                <ul class="pagination" id="pagination">
                                    <!-- Pagination buttons will be generated here -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer-custom">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5><i class="fas fa-search-location me-2"></i>Trace Together</h5>
                    <p class="mb-4">Pakistan's most trusted missing persons support network. Combining professional expertise, advanced technology, and community strength to bring families home safely and provide comprehensive support during their most challenging times.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/" title="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="https://x.com/" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.instagram.com/" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://pk.linkedin.com/" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                        <a href="https://wa.me/923001234567" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 mb-4">
                      <h5>Quick Actions</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="listing.html#report-carousel"><i class="fas fa-plus me-2"></i>Report Missing</a></li>
                        <li class="mb-2"><a href="#emergency"><i class="fas fa-phone me-2"></i>Emergency Help</a></li>
                        <li class="mb-2"><a href="listing.html#listingsContainer"><i class="fas fa-search me-2"></i>Search Database</a></li>
                        <li class="mb-2"><a href="home.html#services"><i class="fas fa-heart me-2"></i>Crisis Support</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 mb-4">
                    <h5>Emergency Contact</h5>
                    <div class="mb-3">
                        <p class="mb-2"><i class="fas fa-map-marker-alt me-2 text-primary"></i>CPLC Head Office, Clifton, Karachi, Sindh</p>
                        <p class="mb-2"><i class="fas fa-phone me-2 text-success"></i>Emergency: <strong>1102</strong> (24/7 Hotline)</p>
                        <p class="mb-2"><i class="fas fa-envelope me-2 text-info"></i>crisis@tracetogether.org.pk</p>
                        <p class="mb-2"><i class="fab fa-whatsapp me-2 text-success"></i>WhatsApp: +92-300-TRACE11</p>
                    </div>
                </div>
                <div class="col-lg-3 mb-4">
                    <h5>Stay Connected</h5>
                    <p class="mb-3">Get alerts about found persons and safety updates in your area. Your subscription helps save lives.</p>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control" placeholder="Your email for alerts" id="emailAlert">
                        <button class="btn btn-primary" id="subscribeBtn">
                            <i class="fas fa-bell me-1"></i>Join Network
                        </button>
                    </div>
                    <small class="text-muted">We respect your privacy. Unsubscribe anytime.</small>
                </div>
            </div>
            <hr class="my-4">
            <div class="row">
                <div class="col-md-8">
                    <p class="mb-2">&copy; 2024 Trace Together NGO. All rights reserved. | <a href="#privacy">Privacy Policy</a> | <a href="#crisis">Crisis Resources</a> | <a href="#volunteer">Volunteer</a></p>
                    <p class="small mb-0">Official Partner: Citizens Police Liaison Committee (CPLC) Sindh | Licensed by Social Welfare Department</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <p class="mb-0"><i class="fas fa-shield-alt me-2 text-success"></i>Verified NGO</p>
                    <p class="small mb-0">Registration No: SW-KHI-2019-0456</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Improved Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="image-modal-close">&times;</span>
        <div class="image-loading">
            <div class="image-loading-spinner"></div>
        </div>
        <img class="image-modal-content" id="modalImage" alt="Enlarged view">
        <div class="image-modal-caption" id="modalCaption"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
          document.addEventListener('DOMContentLoaded', function() {
            var emergencyLink = document.querySelector('a[href="#emergency"]');
            if (emergencyLink) {
                emergencyLink.addEventListener('click', function(event) {
                    // Show the alert
                    alert('Critical Response Protocol\n\nURGENT: Critical response team has been notified and will be\ndeployed within 2 hours. You will receive a confirmation call within 5\nminutes.\n\nEmergency hotline: 1102\n\nFor immediate assistance, call our 24/7 hotline: 1102');
                });
            }
        });
        // 3D Carousel functionality for report options
        document.addEventListener('DOMContentLoaded', function() {
            const carousel3d = document.getElementById('carousel3d');
            if (!carousel3d) return;

            let currentSlide = 0;
            const totalSlides = document.querySelectorAll('.carousel-item-3d').length;
            const angleStep = 360 / totalSlides;
            
            function updateCarousel() {
                document.querySelectorAll('.carousel-item-3d').forEach((item, index) => {
                    const angle = (index - currentSlide) * angleStep;
                    const translateZ = 280;
                    item.style.transform = `rotateY(${angle}deg) translateZ(${translateZ}px)`;
                    item.style.opacity = index === currentSlide ? '0.7' : '0.7';
                    
                    if (index === currentSlide) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                
                carousel3d.style.transform = `rotateY(${-currentSlide * angleStep}deg)`;
            }
            
            function nextSlide() {
                currentSlide = (currentSlide + 1) % totalSlides;
                updateCarousel();
            }
            
            function prevSlide() {
                currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
                updateCarousel();
            }
            
            // Initialize carousel
            updateCarousel();
            
            // Auto-rotate carousel
            let autoRotateInterval = setInterval(nextSlide, 5000);
            
            // Pause auto-rotate on hover
            const carouselContainer = document.querySelector('.carousel-3d-container');
            carouselContainer.addEventListener('mouseenter', function() {
                clearInterval(autoRotateInterval);
            });
            
            carouselContainer.addEventListener('mouseleave', function() {
                autoRotateInterval = setInterval(nextSlide, 5000);
            });
            
            // Button controls
            document.getElementById('nextBtn')?.addEventListener('click', function() {
                clearInterval(autoRotateInterval);
                nextSlide();
                autoRotateInterval = setInterval(nextSlide, 5000);
            });
            
            document.getElementById('prevBtn')?.addEventListener('click', function() {
                clearInterval(autoRotateInterval);
                prevSlide();
                autoRotateInterval = setInterval(nextSlide, 5000);
            });
        });

        // Extended sample listings data (30+ items)
        const sampleListings = [
            {
                id: 1,
                type: 'Lost',
                category: 'Person',
                title: 'Missing: Sarah Chen, 16 years old',
                description: 'Sarah was last seen leaving Roosevelt High School on Friday afternoon. She is 5\'4" with long black hair, wearing a red hoodie and blue jeans. She has a small scar above her left eyebrow and was carrying a black backpack with anime stickers. Family is very worried as this is unusual behavior for her.',
                location: 'Roosevelt High School - Main Campus',
                date: '2024-02-15',
                contact: '(555) 911-2345',
                image: './ChatGPT Image Aug 23, 2025, 11_35_26 PM.PNG'
            },
            {
                id: 2,
                type: 'Found',
                category: 'Person',
                title: 'Found: Elderly man with memory issues',
                description: 'Found an elderly gentleman, approximately 70-75 years old, sitting confused at the bus stop. He\'s wearing a blue cardigan, gray pants, and brown loafers. He says his name is "Robert" but cannot remember his address. He appears to have dementia or memory issues and is very gentle and cooperative.',
                location: 'Downtown Bus Terminal - Platform 7',
                date: '2024-02-14',
                contact: '(555) 777-8899',
                image: './ChatGPT Image Aug 24, 2025, 09_51_47 PM.PNG'
            },
            {
                id: 3,
                type: 'Lost',
                category: 'Person',
                title: 'Missing: Maria Rodriguez, 8 years old',
                description: 'Our daughter Maria went missing from Riverside Park playground. She\'s 8 years old, 4 feet tall, with curly brown hair in pigtails. She was wearing a pink Disney princess dress and white sneakers. She\'s very shy with strangers but loves animals. Please call immediately if seen.',
                location: 'Riverside Park - Children\'s Playground',
                date: '2024-02-13',
                contact: '(555) 333-4444',
                image: './ChatGPT Image Aug 24, 2025, 09_51_45 PM.PNG'
            },
            {
                id: 4,
                type: 'Found',
                category: 'Person',
                title: 'Found: Teenager at shopping mall',
                description: 'Found a distressed teenage boy, approximately 14-16 years old, at the food court. He has short blonde hair, wearing a black t-shirt with a skull design and ripped jeans. He seems lost and upset but won\'t give his name. He\'s currently safe with mall security.',
                location: 'Westfield Shopping Center - Food Court',
                date: '2024-02-12',
                contact: '(555) 666-7777',
                image: './ChatGPT Image Aug 24, 2025, 09_51_42 PM.PNG'
            },
            {
                id: 5,
                type: 'Lost',
                category: 'Person',
                title: 'Missing: David Kim, 45 years old',
                description: 'My husband David has been missing since yesterday morning. He\'s 45, Asian male, 5\'8", about 160 lbs with black hair and glasses. He was wearing a navy business suit and carrying a brown leather briefcase. He left for work but never arrived. This is completely out of character.',
                location: 'Financial District - Last seen near subway',
                date: '2024-02-11',
                contact: '(555) 123-9876',
                image: './ChatGPT Image Aug 24, 2025, 09_53_09 PM.PNG'
            },
            {
                id: 6,
                type: 'Found',
                category: 'Person',
                title: 'Found: Young woman at train station',
                description: 'Found a young woman, early 20s, sitting alone and crying at the train station. He has red hair, wearing a green coat and black boots. She appears confused and has no identification with her. She keeps asking for "home" but can\'t provide an address. Currently with station security.',
                location: 'Grand Central Terminal - Track 15',
                date: '2024-02-10',
                contact: '(555) 888-1234',
                image: './ChatGPT Image Aug 24, 2025, 09_53_07 PM.PNG'
            },
            {
                id: 7,
                type: 'Lost',
                category: 'Person',
                title: 'Missing: Jennifer Walsh, 32 years old',
                description: 'Jennifer disappeared after leaving her yoga class. She\'s 32, Caucasian, 5\'6" with long blonde hair usually in a ponytail. She was wearing black yoga pants, a purple tank top, and white sneakers. She drives a silver Honda Civic. Her phone goes straight to voicemail.',
                location: 'Zen Yoga Studio - Downtown',
                date: '2024-02-09',
                contact: '(555) 444-5555',
                image:'./ChatGPT Image Aug 24, 2025, 09_53_04 PM.PNG'
            },
            {
                id: 8,
                type: 'Found',
                category: 'Person',
                title: 'Found: Middle-aged man at hospital',
                description: 'Hospital staff found this man unconscious near the emergency room entrance. He\'s approximately 50 years old, Hispanic, medium build, with a mustache. He was wearing work clothes - blue coveralls with "Mike" embroidered on the pocket. He\'s stable but has no memory of how he got there.',
                location: 'City General Hospital - Emergency Entrance',
                date: '2024-02-08',
                contact: '(555) 777-0000',
                image: './ChatGPT Image Aug 24, 2025, 09_53_02 PM.PNG'
            },
            {
                id: 9,
                type: 'Lost',
                category: 'Person',
                title: 'Missing: Tommy Martinez, 12 years old',
                description: 'Tommy didn\'t come home from school today. He\'s 12 years old, Latino, about 4\'10" with short dark hair. He was wearing his school uniform - white polo shirt, navy pants, and black sneakers. He usually takes the #42 bus home. He\'s never done anything like this before.',
                location: 'Lincoln Elementary School - Bus Stop',
                date: '2024-02-07',
                contact: '(555) 222-3333',
                image: './ChatGPT Image Aug 24, 2025, 09_52_54 PM.PNG'
            },
            {
                id: 10,
                type: 'Found',
                category: 'Person',
                title: 'Found: Senior woman at park bench',
                description: 'Found an elderly woman, about 80 years old, sitting alone on a park bench looking confused. She\'s wearing a floral dress, beige cardigan, and has white permed hair. She has a medical alert bracelet but the information is worn off. She\'s very sweet but can\'t remember her name or address.',
                location: 'Memorial Park - Rose Garden',
                date: '2024-02-06',
                contact: '(555) 555-1111',
                image: './ChatGPT Image Aug 24, 2025, 09_54_35 PM.PNG'
            },

            // 10 ANIMALS
            {
                id: 11,
                type: 'Lost',
                category: 'Pet',
                title: 'Missing: Luna - German Shepherd Mix',
                description: 'Luna is a 3-year-old German Shepherd mix with distinctive tan and black markings. She\'s very friendly but may be scared and hiding. She was wearing a pink collar with a bone-shaped tag. She escaped from our backyard during the thunderstorm last night. She\'s microchipped and spayed.',
                location: 'Maple Street Neighborhood',
                date: '2024-02-15',
                contact: '(555) DOG-LUNA',
                image: './ChatGPT Image Aug 24, 2025, 09_54_32 PM.PNG'
            },
            {
                id: 12,
                type: 'Found',
                category: 'Pet',
                title: 'Found: Orange Tabby Cat',
                description: 'Found this beautiful orange tabby cat hiding under a car in our driveway. He\'s very thin and appears to have been lost for a while. He\'s extremely friendly and purrs constantly. No collar, but he\'s clearly someone\'s beloved pet. He has green eyes and white paws. Currently being cared for.',
                location: 'Oak Hill Residential Area',
                date: '2024-02-14',
                contact: '(555) CAT-HELP',
                image: './ChatGPT Image Aug 24, 2025, 09_54_30 PM.PNG'
            },
            {
                id: 13,
                type: 'Lost',
                category: 'Pet',
                title: 'Missing: Bella - Chocolate Labrador',
                description: 'Bella is our 5-year-old chocolate Labrador who went missing from Riverside Dog Park. She\'s medium-sized, very gentle, and excellent with children. She was wearing a blue collar with rabies and ID tags. She loves water and may have followed the river trail. Please check along the waterfront.',
                location: 'Riverside Dog Park',
                date: '2024-02-13',
                contact: '(555) LAB-LOVE',
                image: './ChatGPT Image Aug 24, 2025, 09_54_28 PM.PNG'
            },
            {
                id: 14,
                type: 'Found',
                category: 'Pet',
                title: 'Found: Small White Poodle',
                description: 'Found this adorable small white poodle wandering downtown. He\'s clearly well-cared for with a recent grooming. He\'s wearing a rhinestone collar but no ID tags. He\'s very well-behaved and knows several tricks. He seems anxious and is probably missing his family terribly.',
                location: 'Downtown Shopping District',
                date: '2024-02-12',
                contact: '(555) POODLE1',
                image:'./ChatGPT Image Aug 24, 2025, 09_54_26 PM.PNG'
            },
            {
                id: 15,
                type: 'Lost',
                category: 'Pet',
                title: 'Missing: Max - Border Collie',
                description: 'Max is our 2-year-old Border Collie who escaped during his morning walk when his leash broke. He\'s black and white with one blue eye and one brown eye. He\'s very intelligent but may not come to strangers. He responds to his name and loves tennis balls. He\'s wearing a red collar.',
                location: 'Pine Ridge Trail - Mile Marker 3',
                date: '2024-02-11',
                contact: '(555) MAX-HELP',
                image: './ChatGPT Image Aug 24, 2025, 09_54_24 PM.PNG'
            },
            {
                id: 16,
                type: 'Found',
                category: 'Pet',
                title: 'Found: Gray and White Cat',
                description: 'Found this sweet gray and white cat in our garage. She appears to be pregnant and is very hungry. She\'s extremely affectionate and clearly used to human contact. No collar or identification. She has a small notch in her right ear and beautiful green eyes. She needs veterinary care soon.',
                location: 'Sunset Boulevard - Near Gas Station',
                date: '2024-02-10',
                contact: '(555) CAT-CARE',
                image: './ChatGPT Image Aug 24, 2025, 09_54_21 PM.PNG'
            },
            {
                id: 17,
                type: 'Lost',
                category: 'Pet',
                title: 'Missing: Charlie - Beagle Mix',
                description: 'Charlie is our 4-year-old beagle mix who slipped out when the delivery driver left our gate open. He\'s brown and white with long floppy ears and a waggy tail. He\'s very food motivated and will approach anyone with treats. He\'s wearing a green collar with our phone number.',
                location: 'Willowbrook Subdivision',
                date: '2024-02-09',
                contact: '(555) BEAGLE1',
                image: './ChatGPT Image Aug 24, 2025, 09_54_18 PM.PNG'
            },
            {
                id: 18,
                type: 'Found',
                category: 'Pet',
                title: 'Found: Black Cat with White Chest',
                description: 'Found this handsome black cat with a distinctive white bib marking on his chest. He was hiding in our shed and appears to have been lost for several days. He\'s neutered, declawed on front paws, and very gentle. He\'s eating well but clearly misses his home. No collar or tags.',
                location: 'Heritage Village - Elm Street',
                date: '2024-02-08',
                contact: '(555) BLACK-CAT',
                image: './ChatGPT Image Aug 24, 2025, 09_54_15 PM.PNG'
            },
            {
                id: 19,
                type: 'Lost',
                category: 'Pet',
                title: 'Missing: Daisy - Jack Russell Terrier',
                description: 'Daisy is our energetic 1-year-old Jack Russell Terrier who escaped from our yard. She\'s small, mostly white with brown patches around her ears and eyes. She\'s very active and may have chased a squirrel or cat. She\'s wearing a purple collar with bell and ID tag. She\'s not spayed yet.',
                location: 'Hillcrest Neighborhood',
                date: '2024-02-07',
                contact: '(555) DAISY99',
                image: './ChatGPT Image Aug 24, 2025, 09_54_02 PM.PNG'
            },
            {
                id: 20,
                type: 'Found',
                category: 'Pet',
                title: 'Found: Siamese Cat',
                description: 'Found this beautiful Siamese cat crying outside our apartment building. She has the classic Siamese coloring - cream body with dark face, ears, and tail. She\'s very vocal and social. She appears to be spayed and is in good health. She\'s wearing a breakaway collar but no tags. She\'s clearly someone\'s pampered pet.',
                location: 'Garden Apartments Complex',
                date: '2024-02-06',
                contact: '(555) SIAMESE',
                image: './ChatGPT Image Aug 24, 2025, 09_52_43 PM.PNG'
            },

            // 20 ITEMS
            
            {
                id: 22,
                type: 'Found',
                category: 'Jewelry',
                title: 'Diamond Tennis Bracelet',
                description: 'Found an expensive-looking diamond tennis bracelet in the restroom at the fancy restaurant. The bracelet appears to be real diamonds set in white gold or platinum. It was sitting on the marble counter by the sinks. Given the location and quality, this is clearly very valuable and meaningful to someone.',
                location: 'Le Bernardin Restaurant - Ladies Restroom',
                date: '2024-02-14',
                contact: '(555) DIAMOND',
                image: './ChatGPT Image Aug 24, 2025, 09_51_27 PM.PNG'
            },
            {
                id: 23,
                type: 'Lost',
                category: 'Wallet/Purse',
                title: 'Red Leather Purse with Essentials',
                description: 'Lost my red leather purse containing my driver\'s license, credit cards, about $200 cash, house keys, and my grandmother\'s antique locket with her photo inside. The purse has a distinctive gold chain strap and a small tear in the bottom corner. The locket is irreplaceable family heirloom.',
                location: 'Macy\'s Department Store - Cosmetics Counter',
                date: '2024-02-13',
                contact: '(555) RED-PURSE',
                image: './ChatGPT Image Aug 24, 2025, 09_51_30 PM.PNG'
            },
            {
                id: 24,
                type: 'Found',
                category: 'Electronics',
                title: 'Nintendo Switch OLED with Games',
                description: 'Found a Nintendo Switch OLED console in the special Zelda edition with several game cartridges in a carrying case. The case also contains charging cables and a Pro controller. Found it on a bench at the bus stop. Someone\'s gaming setup is definitely missed. The system has save data for multiple games.',
                location: 'Metro Bus Stop - 5th and Main',
                date: '2024-02-12',
                contact: 'nintendo.found@email.com',
                image: './ChatGPT Image Aug 24, 2025, 09_51_32 PM.PNG'
            },
            {
                id: 25,
                type: 'Lost',
                category: 'Keys',
                title: 'BMW Car Keys with House Keys',
                description: 'Lost my BMW key fob along with a ring of house keys and office keycard. The BMW key is for a 2023 3-Series and has a distinctive leather keychain with my initials "M.J." embossed on it. Also includes keys to my apartment, mailbox, and my parents\' house. Desperately need these back.',
                location: 'Whole Foods Market - Parking Lot',
                date: '2024-02-11',
                contact: '(555) BMW-KEYS',
                image: './GPT_Image_1_i_need_an_image_for_Lost_my_BMW_key_fob_along_with_0.PNG'
            },
            {
                id: 26,
                type: 'Found',
                category: 'Accessories',
                title: 'Rolex Submariner Watch',
                description: 'Found what appears to be a genuine Rolex Submariner watch on the sidewalk outside the bank. The watch is in excellent condition with minimal wear on the bracelet. This is clearly a very expensive timepiece that someone is frantically looking for. No engravings visible, but serial number intact.',
                location: 'First National Bank - Main Branch Entrance',
                date: '2024-02-10',
                contact: '(555) ROLEX99',
                image: './GPT_Image_1_i_need_an_image_for___Found_what_appears_to_be_a_g_0.PNG'
            },
            {
                id: 27,
                type: 'Lost',
                category: 'Documents',
                title: 'Wedding Ring in Small Velvet Box',
                description: 'Lost my husband\'s wedding ring which was in a small navy velvet ring box. I had taken it to be resized and somehow lost the box between the jewelry store and my car. The ring is white gold with a simple brushed finish. This ring means everything to us - we\'ve been married 25 years.',
                location: 'Diamond District - Between 47th and 48th Street',
                date: '2024-02-09',
                contact: 'wedding.ring.lost@email.com',
                image: './GPT_Image_1_i_need_an_image_for___Lost_my_husbands_wedding_rin_0.PNG'
            },
            {
                id: 28,
                type: 'Found',
                category: 'Electronics',
                title: 'iPhone 15 Pro Max in Purple Case',
                description: 'Found an iPhone 15 Pro Max in a distinctive purple silicone case with a PopSocket attachment. The phone has a cracked screen protector but the screen underneath appears fine. The lock screen shows family photos. Found it wedged between cushions at the coffee shop. Battery was nearly dead when found.',
                location: 'Starbucks Coffee - University Avenue',
                date: '2024-02-08',
                contact: '(555) IPHONE15',
                image: './GPT_Image_1_remove_the_purple_thing_covering_the_screen_0.PNG'
            },
            {
                id: 29,
                type: 'Lost',
                category: 'Clothing',
                title: 'Vintage Leather Motorcycle Jacket',
                description: 'Lost my vintage 1980s leather motorcycle jacket that belonged to my father. It\'s black leather with silver zippers and has patches from various motorcycle rallies. There\'s a distinctive eagle patch on the back and smaller patches on the arms. This jacket has immense sentimental value as my dad passed away last year.',
                location: 'Harley Davidson Dealership - Service Department',
                date: '2024-02-07',
                contact: '(555) VINTAGE1',
                image: './GPT_Image_1_i_need_an_image_for__Lost_my_vintage_1980s_leather_0.PNG'
            },
            {
                id: 30,
                type: 'Found',
                category: 'Sports',
                title: 'Professional Tennis Racket Set',
                description: 'Found a professional-grade tennis racket in an expensive Wilson Pro Staff bag with multiple rackets, grips, strings, and tournament badges attached. The bag also contains what appears to be tournament entry forms and rankings information. This clearly belongs to a serious competitive player.',
                location: 'City Tennis Courts - Court 4',
                date: '2024-02-06',
                contact: 'tennis.pro.found@email.com',
                image: './Flux_Schnell_i_need_an_image_for_Found_a_professionalgrade_ten_0.PNG'
            },
            {
                id: 31,
                type: 'Lost',
                category: 'Electronics',
                title: 'Canon EOS R5 Camera with Lenses',
                description: 'Lost my Canon EOS R5 camera with 24-70mm f/2.8 lens attached, plus a 70-200mm lens in the bag. The camera bag also contained memory cards with irreplaceable wedding photos from last weekend\'s shoot. The camera has a distinctive red strap and custom grip. This is my livelihood - please help!',
                location: 'Central Park - Bethesda Fountain Area',
                date: '2024-02-05',
                contact: 'photographer.help@email.com',
                image: './Flux_Schnell_i_need_an_image_for_Lost_my_Canon_EOS_R5_camera_w_1.PNG'
            },
            {
                id: 32,
                type: 'Found',
                category: 'Accessories',
                title: 'Designer Sunglasses - Chanel',
                description: 'Found a pair of authentic Chanel sunglasses with the distinctive interlocked C logo on the temples. They were in their original case with cleaning cloth and authentication cards. The sunglasses appear to be the latest season and are in perfect condition. Found them on a restaurant table after lunch rush.',
                location: 'The Plaza Hotel - Oak Room Restaurant',
                date: '2024-02-04',
                contact: '(555) CHANEL1',
                image: './Flux_Schnell_i_need_an_image_for_Found_a_pair_of_authentic_Cha_3.PNG'
            },
            {
                id: 33,
                type: 'Lost',
                category: 'Wallet/Purse',
                title: 'Black Gucci Wallet with Gold Hardware',
                description: 'Lost my black Gucci wallet with distinctive gold GG hardware. Contains my driver\'s license, several credit cards, business cards, and about $150 cash. Also has my gym membership card and a photo of my children in the clear ID window. The wallet was a gift from my wife for our anniversary.',
                location: 'Men\'s Wearhouse - Fitting Room Area',
                date: '2024-02-03',
                contact: '(555) GUCCI-WALLET',
                image: './Flux_Schnell_i_need_an_image_for_Lost_my_black_Gucci_wallet_wi_1.PNG'
            },
            {
                id: 34,
                type: 'Found',
                category: 'Electronics',
                title: 'iPad Pro with Apple Pencil and Keyboard',
                description: 'Found an iPad Pro 12.9" with Apple Pencil and Magic Keyboard in a leather folio case. The iPad has digital art apps and appears to belong to an artist or designer. The lock screen shows beautiful digital artwork. The Apple Pencil is the 2nd generation and magnetically attached. High-end setup clearly missed.',
                location: 'Art Supply Store - Digital Art Section',
                date: '2024-02-02',
                contact: 'ipad.artist.found@email.com',
                image: './Flux_Schnell_i_need_an_image_for_Found_an_iPad_Pro_129_with_Ap_1.PNG'
            },
            {
                id: 35,
                type: 'Lost',
                category: 'Jewelry',
                title: 'Antique Gold Pocket Watch',
                description: 'Lost my great-grandfather\'s antique gold pocket watch that\'s been in our family for over 100 years. It\'s 18k gold with intricate engravings of vines and flowers on the case. The watch still keeps perfect time and has our family name engraved inside. This is an irreplaceable family heirloom with immense sentimental value.',
                location: 'Metropolitan Museum of Art - American Wing',
                date: '2024-02-01',
                contact: 'antique.watch@email.com',
                image:'./Flux_Schnell_i_need_an_image_for_Lost_my_greatgrandfathers_ant_3.PNG'
            },
            {
                id: 36,
                type: 'Found',
                category: 'Keys',
                title: 'Mercedes Car Key with Remote Start',
                description: 'Found a Mercedes-Benz key fob with remote start capability and several other keys on a ring. The keychain has a small silver Mercedes emblem and what appears to be a house key, office key, and a small padlock key. Found in the parking garage, probably dropped while getting out of the car.',
                location: 'Downtown Parking Garage - Level 3',
                date: '2024-01-31',
                contact: '(555) MERCEDES',
                image: './ChatGPT Image Aug 24, 2025, 09_53_54 PM.PNG'
            },
            {
                id: 37,
                type: 'Lost',
                category: 'Sports',
                title: 'Custom Golf Clubs in Titleist Bag',
                description: 'Lost my custom-fitted golf club set in a Titleist stand bag. The clubs are Titleist T200 irons with custom grips and my initials "D.W." on each club. The bag also contains a Scotty Cameron putter, TaylorMade driver, and several dozen Pro V1 golf balls. This set cost over $3,000 and is perfectly fitted to my swing.',
                location: 'Pine Valley Golf Course - Parking Lot',
                date: '2024-01-30',
                contact: '(555) GOLF-PRO',
                image: './Flux_Schnell_i_need_an_image_for_Lost_my_customfitted_golf_clu_2.PNG'
            },
            {
                id: 38,
                type: 'Found',
                category: 'Clothing',
                title: 'Canada Goose Winter Parka - Size Large',
                description: 'Found an expensive Canada Goose winter parka, size large, in excellent condition. The jacket is the classic black color with the distinctive logo patch on the arm. Found hanging on a fence post near the ice rink. Given the cold weather, someone is definitely missing this high-end winter coat.',
                location: 'Rockefeller Center - Ice Skating Rink',
                date: '2024-01-29',
                contact: '(555) GOOSE-COAT',
                image:'./Flux_Schnell_i_need_an_image_for_Found_an_expensive_Canada_Goo_2.PNG'
            },
            {
                id: 39,
                type: 'Lost',
                category: 'Documents',
                title: 'Passport in Navy Leather Holder',
                description: 'Lost my US passport in a navy blue leather passport holder that also contained my Global Entry card, European health insurance card, and several business cards. I have an international flight next week and desperately need this back. The passport holder was a gift and has my initials "K.L." embossed in gold.',
                location: 'JFK Airport - Terminal 1 Security Checkpoint',
                date: '2024-01-28',
                contact: 'passport.emergency@email.com',
                image: './ChatGPT Image Aug 23, 2025, 11_35_26 PM.PNG'
            },
            {
                id: 40,
                type: 'Found',
                category: 'Accessories',
                title: 'Tiffany & Co. Sterling Silver Bracelet',
                description: 'Found a beautiful Tiffany & Co. sterling silver bracelet with the classic heart tag charm. The bracelet appears to be authentic with proper hallmarks and comes in the original Tiffany blue box with white ribbon. Found it in the hotel lobby restroom. This is clearly a cherished piece of jewelry that someone is missing.',
                location: 'Grand Hyatt Hotel - Lobby Restroom',
                date: '2024-01-27',
                contact: '(555) TIFFANY1',
                image: './Flux_Schnell_i_need_an_image_for_Found_a_beautiful_Tiffany__Co_3.PNG'
            }
        ];

        // Global variables
        let allListings = [...sampleListings];
        let displayedListings = [...sampleListings];
        let currentPage = 1;
        const itemsPerPage = 12;

        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupModalHandlers(); // Initialize the modal handlers
        });

        function initializeApp() {
            loadStatistics();
            performSearch();
            setupEventListeners();
            setupSearchSuggestions();
        }

        function loadStatistics() {
            const totalItems = allListings.length;
            const lostItems = allListings.filter(item => item.type === 'Lost').length;
            const foundItems = allListings.filter(item => item.type === 'Found').length;
            
            // Calculate items from this week
            const oneWeekAgo = new Date();
            oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
            const recentItems = allListings.filter(item => new Date(item.date) >= oneWeekAgo).length;

            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('lostItems').textContent = lostItems;
            document.getElementById('foundItems').textContent = foundItems;
            document.getElementById('recentItems').textContent = recentItems;
        }

        function setupEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const typeFilter = document.getElementById('typeFilter');
            const categoryFilter = document.getElementById('categoryFilter');
            const locationFilter = document.getElementById('locationFilter');
            const dateFromFilter = document.getElementById('dateFromFilter');
            const dateToFilter = document.getElementById('dateToFilter');
            const clearFiltersBtn = document.getElementById('clearFilters');
            
            if (searchInput) {
                const debouncedSearch = debounce(() => {
                    currentPage = 1;
                    performSearch();
                }, 300);
                searchInput.addEventListener('input', debouncedSearch);
            }
            
            [typeFilter, categoryFilter, locationFilter, dateFromFilter, dateToFilter].forEach(filter => {
                if (filter) {
                    filter.addEventListener('change', () => {
                        currentPage = 1;
                        performSearch();
                    });
                    filter.addEventListener('input', () => {
                        currentPage = 1;
                        performSearch();
                    });
                }
            });
            
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', clearAllFilters);
            }
        }

        function performSearch() {
            const searchTerm = document.getElementById('searchInput')?.value.toLowerCase().trim() || '';
            const typeFilter = document.getElementById('typeFilter')?.value || 'all';
            const categoryFilter = document.getElementById('categoryFilter')?.value || 'all';
            const locationFilter = document.getElementById('locationFilter')?.value.toLowerCase().trim() || '';
            const dateFrom = document.getElementById('dateFromFilter')?.value || '';
            const dateTo = document.getElementById('dateToFilter')?.value || '';
            
            let filteredListings = [...allListings];
            
            // Text search
            if (searchTerm) {
                filteredListings = filteredListings.filter(listing => 
                    listing.title.toLowerCase().includes(searchTerm) ||
                    listing.description.toLowerCase().includes(searchTerm) ||
                    listing.location.toLowerCase().includes(searchTerm) ||
                    listing.category.toLowerCase().includes(searchTerm) ||
                    listing.contact.toLowerCase().includes(searchTerm)
                );
            }
            
            // Type filter
            if (typeFilter !== 'all') {
                filteredListings = filteredListings.filter(listing => 
                    listing.type.toLowerCase() === typeFilter.toLowerCase()
                );
            }
            
            // Category filter
            if (categoryFilter !== 'all') {
                filteredListings = filteredListings.filter(listing => 
                    listing.category.toLowerCase() === categoryFilter.toLowerCase()
                );
            }
            
            // Location filter
            if (locationFilter) {
                filteredListings = filteredListings.filter(listing => 
                    listing.location.toLowerCase().includes(locationFilter)
                );
            }
            
            // Date range filter
            if (dateFrom) {
                filteredListings = filteredListings.filter(listing => 
                    new Date(listing.date) >= new Date(dateFrom)
                );
            }
            
            if (dateTo) {
                filteredListings = filteredListings.filter(listing => 
                    new Date(listing.date) <= new Date(dateTo)
                );
            }
            
            // Sort results
            filteredListings = sortSearchResults(filteredListings, searchTerm);
            
            displayedListings = filteredListings;
            loadListings();
            updateSearchResultsCount(filteredListings.length);
            setupPagination(filteredListings.length);
            toggleClearFiltersButton();
        }

        function loadListings() {
            const container = document.getElementById('listingsContainer');
            if (!container) return;
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageListings = displayedListings.slice(startIndex, endIndex);
            
            container.innerHTML = '';
            
            if (pageListings.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-search"></i>
                        <h4>No listings found</h4>
                        <p>Try adjusting your search filters or check back later for new listings.</p>
                    </div>
                `;
                return;
            }
            
            pageListings.forEach(listing => {
                const listingElement = createListingElement(listing);
                container.appendChild(listingElement);
            });
        }

        function createListingElement(listing) {
            const listingElement = document.createElement('div');
            listingElement.className = 'listing-item';
            listingElement.innerHTML = generateListingHTML(listing);
            return listingElement;
        }

        function generateListingHTML(listing) {
            return `
                <div class="listing-image">
                    ${listing.image ? 
                        `<img src="${listing.image}" alt="${listing.title}" onclick="openImageModal('${listing.image}', '${listing.title.replace(/'/g, "\\'")}')" style="cursor: pointer;">` : 
                        '<i class="fas fa-image no-image"></i>'
                    }
                </div>
                <div class="listing-content">
                    <span class="listing-type ${listing.type.toLowerCase()}">${listing.type}</span>
                    <h5 class="listing-title">${listing.title}</h5>
                    <p class="mb-2">${listing.description}</p>
                    <div class="listing-meta">
                        <i class="fas fa-map-marker-alt me-1"></i>${listing.location}  
                        <i class="fas fa-calendar me-1"></i>${formatDate(listing.date)}  
                        <i class="fas fa-folder me-1"></i>${listing.category}
                    </div>
                    <div class="mt-2">
                        <i class="fas fa-phone me-1"></i>${listing.contact}
                    </div>
                    <div class="listing-actions">
                        <button class="btn btn-sm btn-outline-primary" onclick="contactListing(${listing.id})">
                            <i class="fas fa-envelope me-1"></i>Contact
                        </button>
                        <button class="btn btn-sm btn-outline-secondary" onclick="shareListing(${listing.id})">
                            <i class="fas fa-share me-1"></i>Share
                        </button>
                    </div>
                </div>
            `;
        }

        function setupPagination(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (!pagination || totalPages <= 1) {
                if (pagination) pagination.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // Previous button
            paginationHTML += `
                <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="changePage(${currentPage - 1}); return false;">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                </li>
            `;
            
            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);
            
            if (startPage > 1) {
                paginationHTML += `<li class="page-item"><a class="page-link" href="#" onclick="changePage(1); return false;">1</a></li>`;
                if (startPage > 2) {
                    paginationHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                        <a class="page-link" href="#" onclick="changePage(${i}); return false;">${i}</a>
                    </li>
                `;
            }
            
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
                }
                paginationHTML += `<li class="page-item"><a class="page-link" href="#" onclick="changePage(${totalPages}); return false;">${totalPages}</a></li>`;
            }
            
            // Next button
            paginationHTML += `
                <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="changePage(${currentPage + 1}); return false;">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </li>
            `;
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            const totalPages = Math.ceil(displayedListings.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            loadListings();
            setupPagination(displayedListings.length);
            
            // Scroll to top of listings
            document.querySelector('.listings-container').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function sortSearchResults(results, searchTerm) {
            if (!searchTerm) {
                return results.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            return results.map(listing => ({
                ...listing,
                relevanceScore: calculateRelevanceScore(listing, searchTerm)
            }))
            .sort((a, b) => {
                if (b.relevanceScore !== a.relevanceScore) {
                    return b.relevanceScore - a.relevanceScore;
                }
                return new Date(b.date) - new Date(a.date);
            });
        }

        function calculateRelevanceScore(listing, searchTerm) {
            let score = 0;
            const term = searchTerm.toLowerCase();
            
            if (listing.title.toLowerCase().includes(term)) {
                score += listing.title.toLowerCase().indexOf(term) === 0 ? 10 : 7;
            }
            if (listing.category.toLowerCase().includes(term)) score += 5;
            if (listing.location.toLowerCase().includes(term)) score += 4;
            if (listing.description.toLowerCase().includes(term)) score += 3;
            if (listing.contact.toLowerCase().includes(term)) score += 2;
            
            const daysSincePosted = Math.floor((new Date() - new Date(listing.date)) / (1000 * 60 * 60 * 24));
            if (daysSincePosted < 7) score += 1;
            
            return score;
        }

        function updateSearchResultsCount(count) {
            const resultsCount = document.getElementById('searchResultsCount');
            if (resultsCount) {
                const totalCount = allListings.length;
                if (count === totalCount) {
                    resultsCount.textContent = `Showing all ${count} listings`;
                } else {
                    resultsCount.textContent = `Found ${count} of ${totalCount} listings`;
                }
            }
        }

        function clearAllFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('typeFilter').value = 'all';
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('locationFilter').value = '';
            document.getElementById('dateFromFilter').value = '';
            document.getElementById('dateToFilter').value = '';
            
            currentPage = 1;
            performSearch();
        }

        function toggleClearFiltersButton() {
            const clearBtn = document.getElementById('clearFilters');
            if (!clearBtn) return;
            
            const hasActiveFilters = 
                document.getElementById('searchInput').value !== '' ||
                document.getElementById('typeFilter').value !== 'all' ||
                document.getElementById('categoryFilter').value !== 'all' ||
                document.getElementById('locationFilter').value !== '' ||
                document.getElementById('dateFromFilter').value !== '' ||
                document.getElementById('dateToFilter').value !== '';
            
            clearBtn.style.display = hasActiveFilters ? 'inline-block' : 'none';
        }

        function setupSearchSuggestions() {
            const searchInput = document.getElementById('searchInput');
            const suggestionsContainer = document.getElementById('searchSuggestions');
            
            if (!searchInput || !suggestionsContainer) return;
            
            searchInput.addEventListener('input', function(e) {
                const value = e.target.value.toLowerCase().trim();
                if (value.length < 2) {
                    hideSuggestions();
                    return;
                }
                
                const suggestions = generateSearchSuggestions(value);
                displaySuggestions(suggestions);
            });
            
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.search-container')) {
                    hideSuggestions();
                }
            });
        }

        function generateSearchSuggestions(query) {
            const suggestions = new Set();
            const limit = 5;
            
            allListings.forEach(listing => {
                if (listing.title.toLowerCase().includes(query)) {
                    suggestions.add(listing.title);
                }
                if (listing.category.toLowerCase().includes(query)) {
                    suggestions.add(listing.category);
                }
                if (listing.location.toLowerCase().includes(query)) {
                    suggestions.add(listing.location);
                }
                
                if (suggestions.size >= limit) return;
            });
            
            return Array.from(suggestions).slice(0, limit);
        }

        function displaySuggestions(suggestions) {
            const container = document.getElementById('searchSuggestions');
            if (!container) return;
            
            if (suggestions.length === 0) {
                hideSuggestions();
                return;
            }
            
            container.innerHTML = suggestions.map(suggestion => `
                <div class="search-suggestion" onclick="selectSuggestion('${suggestion}')">
                    <i class="fas fa-search me-2"></i>${suggestion}
                </div>
            `).join('');
            
            container.style.display = 'block';
        }

        function hideSuggestions() {
            const container = document.getElementById('searchSuggestions');
            if (container) {
                container.style.display = 'none';
            }
        }

        function selectSuggestion(suggestion) {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.value = suggestion;
                currentPage = 1;
                performSearch();
                hideSuggestions();
            }
        }

        // Improved modal functionality
        function setupModalHandlers() {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const captionText = document.getElementById('modalCaption');
            const closeBtn = document.querySelector('.image-modal-close');
            const loadingElement = document.querySelector('.image-loading');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', closeImageModal);
            }
            
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeImageModal();
                    }
                });
            }
            
            // Keyboard support
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeImageModal();
                }
            });
            
            // Handle image loading
            if (modalImg) {
                modalImg.onload = function() {
                    loadingElement.style.display = 'none';
                    modalImg.style.display = 'block';
                };
                
                modalImg.onerror = function() {
                    loadingElement.style.display = 'none';
                    modalImg.style.display = 'block';
                    modalImg.src = 'https://via.placeholder.com/400x300?text=Image+Not+Found';
                };
            }
        }
        
        function openImageModal(imageSrc, title = '') {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const captionText = document.getElementById('modalCaption');
            const loadingElement = document.querySelector('.image-loading');
            
            if (modal && modalImg) {
                // Show loading state
                loadingElement.style.display = 'flex';
                modalImg.style.display = 'none';
                
                // Set image and caption
                modalImg.src = imageSrc;
                captionText.textContent = title || '';
                
                // Show modal
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                // Prevent background scrolling
                document.addEventListener('scroll', preventScroll, { passive: false });
            }
        }
        
        function preventScroll(e) {
            e.preventDefault();
            window.scrollTo(0, 0);
            return false;
        }
        
        function closeImageModal() {
            const modal = document.getElementById('imageModal');
            if (modal) {
                modal.classList.remove('show');
                document.body.style.overflow = 'auto';
                
                // Re-enable scrolling
                document.removeEventListener('scroll', preventScroll);
                
                // Reset modal after animation completes
                setTimeout(() => {
                    const modalImg = document.getElementById('modalImage');
                    if (modalImg) {
                        modalImg.src = '';
                    }
                }, 300);
            }
        }

        function contactListing(listingId) {
            const listing = allListings.find(l => l.id === listingId);
            if (!listing) return;
            
            const message = `Hi, I saw your ${listing.type.toLowerCase()} item listing: "${listing.title}". I'd like to get in touch.`;
            
            if (listing.contact.includes('@')) {
                const mailtoLink = `mailto:${listing.contact}?subject=Regarding: ${listing.title}&body=${encodeURIComponent(message)}`;
                window.location.href = mailtoLink;
            } else {
                alert(`Please contact: ${listing.contact}\n\nSuggested message: ${message}`);
            }
        }

        function shareListing(listingId) {
            const listing = allListings.find(l => l.id === listingId);
            if (!listing) return;
            
            const shareText = `${listing.type}: ${listing.title} - ${listing.location}`;
            const shareUrl = `${window.location.href}#listing-${listingId}`;
            
            if (navigator.share) {
                navigator.share({
                    title: shareText,
                    text: listing.description,
                    url: shareUrl
                }).catch(console.error);
            } else {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        alert('Listing link copied to clipboard!');
                    }).catch(() => {
                        fallbackCopyToClipboard(shareUrl);
                    });
                } else {
                    fallbackCopyToClipboard(shareUrl);
                }
            }
        }

        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('Listing link copied to clipboard!');
            } catch (err) {
                prompt('Copy this link to share:', text);
            }
            
            document.body.removeChild(textArea);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Global function exports
        window.changePage = changePage;
        window.contactListing = contactListing;
        window.shareListing = shareListing;
        window.openImageModal = openImageModal;
        window.closeImageModal = closeImageModal;
        window.selectSuggestion = selectSuggestion;
        window.clearAllFilters = clearAllFilters;

        // NAVBAR AND FOOTER JAVASCRIPT
        $(document).ready(function() {
            
            // ===== NAVBAR FUNCTIONALITY =====
            
            // Navbar scroll effect - changes appearance when scrolling
            $(window).scroll(function() {
                if ($(window).scrollTop() > 50) {
                    $('.navbar-custom').addClass('scrolled');
                } else {
                    $('.navbar-custom').removeClass('scrolled');
                }
            });

            // Smooth scrolling for navigation links
            $('a[href^="#"]').on('click', function(e) {
                e.preventDefault();
                const target = $(this.getAttribute('href'));
                if (target.length) {
                    $('html, body').animate({
                        scrollTop: target.offset().top - 80
                    }, 1000);
                }
            });

            // ===== FOOTER FUNCTIONALITY =====
            
            // Email subscription functionality
            $('#subscribeBtn').on('click', function() {
                const email = $('#emailAlert').val();
                if (email && validateEmail(email)) {
                    // Show success message
                    showSuccessAlert(
                        'Subscription Successful!', 
                        'Thank you for subscribing! You will receive important alerts and updates about missing persons in your area.'
                    );
                    // Clear the input field
                    $('#emailAlert').val('');
                } else {
                    // Show error message
                    showErrorAlert(
                        'Invalid Email', 
                        'Please enter a valid email address.'
                    );
                }
            });

            // Enter key support for email subscription
            $('#emailAlert').on('keypress', function(e) {
                if (e.which === 13) { // Enter key
                    $('#subscribeBtn').click();
                }
            });

            // ===== UTILITY FUNCTIONS =====
            
            // Email validation function
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            // Success alert function
            function showSuccessAlert(title, message) {
                alert(` ${title}\n\n${message}\n\nFor immediate assistance, call our 24/7 hotline: 1102`);
            }

            // Error alert function  
            function showErrorAlert(title, message) {
                alert(` ${title}\n\n${message}\n\nFor immediate assistance, call our 24/7 hotline: 1102`);
            }

            // ===== OPTIONAL ENHANCEMENTS =====
            
            // Add active state to current page navigation link
            function setActiveNavLink() {
                const currentPage = window.location.pathname.split('/').pop();
                $('.nav-link').removeClass('active');
                
                // Map of pages to nav links
                const pageMap = {
                    'index2.html': 'home',
                    'listing.html': 'listing.html',
                    'ourNGOs.html': 'ourNGOs.html',
                    'contact us.html': 'contact us.html',
                    'about us.html': 'about us.html'
                };
                
                if (pageMap[currentPage]) {
                    $(`.nav-link[href="${pageMap[currentPage]}"]`).addClass('active');
                }
            }
            
            // Initialize active nav link
            setActiveNavLink();

            // Navbar collapse on mobile when clicking links
            $('.navbar-nav .nav-link').on('click', function() {
                if ($(window).width() < 992) {
                    $('.navbar-collapse').collapse('hide');
                }
            });

            // Social media link tracking (optional analytics)
            $('.social-links a').on('click', function() {
                const platform = $(this).attr('title');
                console.log(`Social media click: ${platform}`);
                // You can add analytics tracking here
            });

            // Footer link hover effects enhancement
            $('.footer-custom a').hover(
                function() {
                    $(this).css('padding-left', '5px');
                },
                function() {
                    $(this).css('padding-left', '0px');
                }
            );
        });

        // ===== ADDITIONAL STANDALONE FUNCTIONS =====

        // Function to update emergency contact number
        function updateEmergencyNumber(newNumber) {
            $('.footer-custom').find('strong').text(newNumber);
        }

        // Function to toggle navbar visibility
        function toggleNavbar(show = true) {
            if (show) {
                $('.navbar-custom').slideDown();
            } else {
                $('.navbar-custom').slideUp();
            }
        }

        // Function to update social media links
        function updateSocialLinks(socialMediaData) {
            const socialContainer = $('.social-links');
            socialContainer.empty();
            
            socialMediaData.forEach(function(social) {
                const link = $(`<a href="${social.url}" title="${social.name}">
                                <i class="${social.icon}"></i>
                               </a>`);
                socialContainer.append(link);
            });
        }

        // Function to add new footer section
        function addFooterSection(title, content, columnClass = 'col-lg-3') {
            const footerRow = $('.footer-custom .container .row').first();
            const newSection = $(`
                <div class="${columnClass} mb-4">
                    <h5>${title}</h5>
                    ${content}
                </div>
            `);
            footerRow.append(newSection);
        }
    </script>
</body>
</html>